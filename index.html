<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ÙˆÙ„Ø¯ Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ù…Ù„ ÙˆÙÙ„Ø§ÙŠØ± ÙˆØ³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ©</title>

<!-- Ù…ÙƒØªØ¨Ø§Øª -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<style>
body { font-family: "Segoe UI", Tahoma, "Noto Naskh Arabic", sans-serif; background: #f0f4f8; color:#111; padding:20px; }
.container{ max-width:1200px; margin:auto; }
header{ background:#1e293b; padding:20px; border-radius:12px; margin-bottom:20px; color:white; }
header h1{ font-size:24px; }
.panel{ background:#334155; padding:20px; border-radius:12px; margin-bottom:20px; color:white; }
input,textarea,select{ width:100%; padding:10px; border-radius:8px; border:none; margin-bottom:12px; background:#475569; color:#fff; }
button{ padding:10px 14px; border:none; border-radius:8px; cursor:pointer; margin:3px 0; font-weight:bold; }
.btn-primary{ background:#3b82f6; color:white; }
.btn-success{ background:#10b981; color:white; }
.btn-danger{ background:#ef4444; color:white; }
.preview{ background:white; color:#111; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.2); margin-top:20px; position:relative; }
.card-img, .cv-img, .flyer-img { border-radius:50%; width:80px; height:80px; object-fit:cover; border:3px solid #3b82f6; }
.card-logo, .flyer-logo { width:50px; height:50px; object-fit:contain; position:absolute; top:10px; right:10px; }
.tpl-modern { background: linear-gradient(135deg,#0ea5e9,#8b5cf6); color:white; }
.tpl-classic { background:white; color:#111; border:2px solid #e5e7eb; }
.tpl-elegant { background: linear-gradient(135deg,#1e293b,#334155); color:#f1f5f9; }
.tpl-colorful { background: linear-gradient(135deg,#f43f5e,#ec4899); color:white; }
.toast{ position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#10b981; color:white; padding:12px 20px; border-radius:10px; display:none; z-index:9999; }
.toast.show{ display:block; }
</style>
</head>
<body>
<div class="container">
<header>
<h1>âš¡ Ù…ÙˆÙ„Ø¯ Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ù…Ù„ ÙˆÙÙ„Ø§ÙŠØ± ÙˆØ³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ©</h1>
<p>ØµÙ…Ù… Ø¨Ø·Ø§Ù‚ØªÙƒØŒ ÙÙ„Ø§ÙŠØ±ÙƒØŒ ÙˆØ³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© â€” ÙˆØªØ­Ù…ÙŠÙ„ PNG/PDF/ZIP</p>
</header>

<div class="panel">
<label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input id="name" type="text">
<label>ğŸ’¼ Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label><input id="job" type="text">
<label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label><input id="email" type="email">
<label>ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ</label><input id="phone" type="tel">
<label>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input id="location" type="text">
<label>ğŸ“ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù‡Ù†ÙŠ</label><textarea id="summary"></textarea>
<label>âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</label><input id="skills" type="text">
<label>ğŸ“· ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©</label><input id="photo" type="file" accept="image/*">
<label>ğŸ¨ Ø´Ø¹Ø§Ø± / Ù„ÙˆØ¬Ùˆ</label><input id="logo" type="file" accept="image/*">
<label>ğŸ¨ Ø§Ù„Ù‚Ø§Ù„Ø¨</label>
<select id="template">
<option value="modern">Ø¹ØµØ±ÙŠ</option>
<option value="classic">ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ</option>
<option value="elegant">Ø£Ù†ÙŠÙ‚</option>
<option value="colorful">Ù…Ù„ÙˆÙ†</option>
</select>

<button class="btn-primary" onclick="updateAll()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
<hr>
<button class="btn-success" onclick="downloadCardPNG()">ğŸ“¥ Ø¨Ø·Ø§Ù‚Ø© PNG</button>
<button class="btn-success" onclick="downloadCardPDF()">ğŸ“¥ Ø¨Ø·Ø§Ù‚Ø© PDF</button>
<button class="btn-success" onclick="downloadFlyerPNG()">ğŸ“¥ ÙÙ„Ø§ÙŠØ± PNG</button>
<button class="btn-success" onclick="downloadFlyerPDF()">ğŸ“¥ ÙÙ„Ø§ÙŠØ± PDF</button>
<button class="btn-success" onclick="downloadCVPNG()">ğŸ“¥ CV PNG</button>
<button class="btn-success" onclick="downloadCVPDF()">ğŸ“¥ CV PDF</button>
<button class="btn-success" onclick="exportZIP()">ğŸ“¦ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙ„ ZIP</button>
<hr>
<button class="btn-danger" onclick="resetForm()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
</div>

<!-- Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø§Øª -->
<div id="cardFront" class="preview tpl-modern">
<img id="cardPhoto" class="card-img" src="" alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©">
<img id="cardLogo" class="card-logo" src="" alt="Ø´Ø¹Ø§Ø±">
<h2 id="prName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h2>
<p id="prJob">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</p>
<p id="prEmail">ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯</p>
<p id="prPhone">ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ</p>
<p id="prLocation">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
</div>

<div id="flyerPreview" class="preview tpl-modern" style="min-height:250px;">
<img id="flyerPhoto" class="flyer-img" src="" alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©">
<img id="flyerLogo" class="flyer-logo" src="" alt="Ø´Ø¹Ø§Ø±">
<h2 id="flyerName">Ø§Ù„Ø§Ø³Ù… â€” Ø§Ù„Ù…Ø³Ù…Ù‰</h2>
<p id="flyerSummary">Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</p>
<p id="flyerSkills">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª: -</p>
</div>

<div id="cvPreview" class="preview tpl-classic" style="min-height:300px;">
<img id="cvPhoto" class="cv-img" src="" alt="ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©">
<h2 id="cvName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h2>
<p id="cvJob">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</p>
<p id="cvSummary">Ù…Ù„Ø®Øµ Ù‚ØµÙŠØ±</p>
<p id="cvSkills">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</p>
</div>

</div>
<div id="toast" class="toast"></div>

<script>
// toast
const toast=document.getElementById("toast");
function showToast(m){ toast.textContent=m; toast.classList.add("show"); setTimeout(()=>toast.classList.remove("show"),3000); }

// ØµÙˆØ±
let photoData = null;
let logoData = null;

document.getElementById('photo').addEventListener('change', function(e){
  const reader = new FileReader();
  reader.onload = function() { 
    photoData = reader.result;
    updateAll();
  };
  reader.readAsDataURL(e.target.files[0]);
});

document.getElementById('logo').addEventListener('change', function(e){
  const reader = new FileReader();
  reader.onload = function() { 
    logoData = reader.result;
    updateAll();
  };
  reader.readAsDataURL(e.target.files[0]);
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
function updateAll(){
  // Ù†ØµÙˆØµ
  document.getElementById('prName').textContent = name.value || "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„";
  document.getElementById('prJob').textContent = job.value || "Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ";
  document.getElementById('prEmail').textContent = email.value || "ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯";
  document.getElementById('prPhone').textContent = phone.value || "ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ";
  document.getElementById('prLocation').textContent = location.value || "ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹";

  document.getElementById('flyerName').textContent = (name.value || "Ø§Ù„Ø§Ø³Ù…") + " â€” " + (job.value || "Ø§Ù„Ù…Ø³Ù…Ù‰");
  document.getElementById('flyerSummary').textContent = summary.value || "Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§";
  document.getElementById('flyerSkills').textContent = "Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª: " + (skills.value || "-");

  document.getElementById('cvName').textContent = name.value || "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„";
  document.getElementById('cvJob').textContent = job.value || "Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ";
  document.getElementById('cvSummary').textContent = summary.value || "Ù…Ù„Ø®Øµ Ù‚ØµÙŠØ±";
  document.getElementById('cvSkills').textContent = skills.value || "Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª";

  // ØµÙˆØ±
  document.getElementById('cardPhoto').src = photoData || "";
  document.getElementById('cardLogo').src = logoData || "";
  document.getElementById('flyerPhoto').src = photoData || "";
  document.getElementById('flyerLogo').src = logoData || "";
  document.getElementById('cvPhoto').src = photoData || "";

  // Ù‚Ø§Ù„Ø¨
  const tpl = template.value;
  cardFront.className = "preview tpl-"+tpl;
  flyerPreview.className = "preview tpl-"+tpl;
  cvPreview.className = "preview tpl-"+(tpl==="classic"?"classic":"modern");

  showToast("âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©");
}

// Ø­ÙØ¸ ÙƒØµÙˆØ±Ø© PNG
async function savePNG(el,file){
  const c = await html2canvas(el, { scale:2, backgroundColor:null });
  c.toBlob(b=>{ saveAs(b,file); showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ "+file); });
}

async function downloadCardPNG(){ savePNG(cardFront,"business-card.png"); }
async function downloadFlyerPNG(){ savePNG(flyerPreview,"flyer.png"); }
async function downloadCVPNG(){ savePNG(cvPreview,"cv-resume.png"); }

// Ø­ÙØ¸ ÙƒÙ€ PDF
async function savePDF(el,file){
  showToast("â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF...");
  const { jsPDF } = window.jspdf;
  const c = await html2canvas(el, { scale:2, backgroundColor:null });
  const img = c.toDataURL("image/png");
  const pdf = new jsPDF({orientation:'portrait', unit:'mm', format:'a4'});
  const imgWidth = 190;
  const imgHeight = (c.height * imgWidth)/c.width;
  pdf.addImage(img,"PNG",10,10,imgWidth,imgHeight);
  pdf.save(file);
  showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ "+file);
}

async function downloadCardPDF(){ savePDF(cardFront,"business-card.pdf"); }
async function downloadFlyerPDF(){ savePDF(flyerPreview,"flyer.pdf"); }
async function downloadCVPDF(){ savePDF(cvPreview,"cv-resume.pdf"); }

// ZIP
async function exportZIP(){
  showToast("â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ ZIP...");
  const zip = new JSZip();
  async function add(el,name){
    const c = await html2canvas(el,{scale:2, backgroundColor:null});
    zip.file(name+".png", c.toDataURL("image/png").split(",")[1], {base64:true});
  }
  await add(cardFront,"business-card");
  await add(flyerPreview,"flyer");
  await add(cvPreview,"cv-resume");
  const content = await zip.generateAsync({type:"blob"});
  saveAs(content,"all-pack.zip");
  showToast("âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ZIP");
}

// Ù…Ø³Ø­
function resetForm(){
  if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
    document.querySelectorAll("input,textarea").forEach(el=>el.value="");
    photoData = null; logoData = null; template.value="modern";
    updateAll();
    showToast("ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ù…Ø³Ø­");
  }
}

// ØªØ­Ø¯ÙŠØ« Ø£ÙˆÙ„ÙŠ
window.addEventListener("load", updateAll);
</script>
</body>
  </html>
