<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…ÙˆÙ„Ø¯ Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ù…Ù„ â€” ÙÙ„Ø§ÙŠØ± â€” Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© (Ø§Ø­ØªØ±Ø§ÙÙŠ)</title>

  <!-- Ù…ÙƒØªØ¨Ø§Øª -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <style>
    body { font-family: "Segoe UI", Tahoma, "Noto Naskh Arabic", sans-serif; background: linear-gradient(135deg,#0f172a,#1e3a5f); color:#fff; padding:20px; }
    .container{ max-width:1400px; margin:auto; }
    header{ background:#1e293b; padding:20px; border-radius:12px; margin-bottom:20px; }
    header h1{ font-size:24px; background:linear-gradient(135deg,#3b82f6,#8b5cf6); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .panel{ background:#1e293b; padding:20px; border-radius:12px; margin-bottom:20px; }
    input,textarea,select{ width:100%; padding:10px; border-radius:8px; border:1px solid #475569; background:#334155; color:#fff; margin-bottom:12px; }
    button{ padding:10px 14px; border:none; border-radius:8px; cursor:pointer; margin:3px 0; font-weight:bold; }
    .btn-primary{ background:linear-gradient(135deg,#3b82f6,#8b5cf6); color:#fff; }
    .btn-success{ background:#10b981; color:#fff; }
    .btn-danger{ background:#ef4444; color:#fff; }
    .preview{ background:#fff; color:#111; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.3); margin-top:20px; }
    .tpl-modern{ background:linear-gradient(135deg,#0ea5e9,#8b5cf6); color:white; }
    .tpl-classic{ background:white; color:#111; border:2px solid #e5e7eb; }
    .tpl-elegant{ background:linear-gradient(135deg,#1e293b,#334155); color:#f1f5f9; }
    .tpl-colorful{ background:linear-gradient(135deg,#f43f5e,#ec4899); color:white; }
    .tpl-bw{ background:white; color:#111; border:3px solid #111; }
    .toast{ position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#10b981; color:white; padding:12px 20px; border-radius:10px; display:none; }
    .toast.show{ display:block; }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>âš¡ Ù…ÙÙˆÙ„Ø¯ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</h1>
    <p>ØµÙ…Ù… Ø¨Ø·Ø§Ù‚Ø©ØŒ ÙÙ„Ø§ÙŠØ±ØŒ ÙˆØ³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© â€” ÙˆØ§Ø³ØªØ®Ø±Ø¬ PNG / PDF / ZIP</p>
  </header>

  <div class="panel">
    <label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input id="name" type="text">
    <label>ğŸ’¼ Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label><input id="job" type="text">
    <label>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label><input id="email" type="email">
    <label>ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ</label><input id="phone" type="tel">
    <label>ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label><input id="location" type="text">
    <label>ğŸ”— Ù…ÙˆÙ‚Ø¹ / Ù„ÙŠÙ†ÙƒØ¯Ø¥Ù†</label><input id="website" type="text">
    <label>ğŸ“ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù‡Ù†ÙŠ</label><textarea id="summary"></textarea>
    <label>âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</label><input id="skills" type="text">
    <label>ğŸ“· ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ©</label><input id="photo" type="file" accept="image/*">
    <label>ğŸ¨ Ø´Ø¹Ø§Ø± / Ù„ÙˆØ¬Ùˆ</label><input id="logo" type="file" accept="image/*">
    <label>ğŸ¨ Ø§Ù„Ù‚Ø§Ù„Ø¨</label>
    <select id="template">
      <option value="modern">Ø¹ØµØ±ÙŠ</option>
      <option value="classic">ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ</option>
      <option value="elegant">Ø£Ù†ÙŠÙ‚</option>
      <option value="colorful">Ù…Ù„ÙˆÙ†</option>
      <option value="bw">Ø£Ø¨ÙŠØ¶ ÙˆØ£Ø³ÙˆØ¯</option>
    </select>

    <button class="btn-primary" onclick="updateAll()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
    <hr>
    <button class="btn-success" onclick="downloadCardPNG()">ğŸ“¥ Ø¨Ø·Ø§Ù‚Ø© PNG</button>
    <button class="btn-success" onclick="downloadCardPDF()">ğŸ“¥ Ø¨Ø·Ø§Ù‚Ø© PDF</button>
    <button class="btn-success" onclick="downloadFlyerPNG()">ğŸ“¥ ÙÙ„Ø§ÙŠØ± PNG</button>
    <button class="btn-success" onclick="downloadFlyerPDF()">ğŸ“¥ ÙÙ„Ø§ÙŠØ± PDF</button>
    <button class="btn-success" onclick="downloadCVPNG()">ğŸ“¥ CV PNG</button>
    <button class="btn-success" onclick="downloadCVPDF()">ğŸ“¥ CV PDF</button>
    <button class="btn-success" onclick="exportZIP()">ğŸ“¦ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ÙƒÙ„ ZIP</button>
    <hr>
    <button class="btn-primary" onclick="getIPAddress()">ğŸŒ Ø¬Ù„Ø¨ IP</button>
    <button class="btn-primary" onclick="generateAIImage(job.value)">ğŸ¤– ØªÙˆÙ„ÙŠØ¯ Ø®Ù„ÙÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
    <button class="btn-danger" onclick="resetForm()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
  </div>

  <div id="cardFront" class="preview tpl-modern">
    <h2 id="prName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h2>
    <p id="prJob">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</p>
    <p id="prEmail">ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯</p>
    <p id="prPhone">ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ</p>
    <p id="prLocation">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
  </div>

  <div id="flyerPreview" class="preview tpl-modern">
    <h2 id="flyerName">Ø§Ù„Ø§Ø³Ù… â€” Ø§Ù„Ù…Ø³Ù…Ù‰</h2>
    <p id="flyerSummary">Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</p>
  </div>

  <div id="cvPreview" class="preview">
    <h2 id="cvName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h2>
    <p id="cvJob">Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</p>
    <p id="cvSummary">Ù…Ù„Ø®Øµ Ù‚ØµÙŠØ±</p>
    <p id="cvSkills">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</p>
  </div>
</div>
<div id="toast" class="toast"></div>

<script>
const toast=document.getElementById("toast");
function showToast(m){ toast.textContent=m; toast.classList.add("show"); setTimeout(()=>toast.classList.remove("show"),3000); }

function updateAll(){
  prName.textContent=name.value||"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„";
  prJob.textContent=job.value||"Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ";
  prEmail.textContent=email.value||"ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯";
  prPhone.textContent=phone.value||"ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ";
  prLocation.textContent=location.value||"ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
  flyerName.textContent=(name.value||"Ø§Ù„Ø§Ø³Ù…")+" â€” "+(job.value||"Ø§Ù„Ù…Ø³Ù…Ù‰");
  flyerSummary.textContent=summary.value||"Ø§Ù„Ù…Ù„Ø®Øµ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§";
  cvName.textContent=name.value||"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„";
  cvJob.textContent=job.value||"Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ";
  cvSummary.textContent=summary.value||"Ù…Ù„Ø®Øµ Ù‚ØµÙŠØ±";
  cvSkills.textContent=skills.value||"Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª";
  cardFront.className="preview tpl-"+template.value;
  flyerPreview.className="preview tpl-"+template.value;
  showToast("âœ… ØªØ­Ø¯ÙŠØ«");
}

// ğŸ–¼ï¸ Ø­ÙØ¸ ÙƒØµÙˆØ±Ø©
async function savePNG(el,file){ const c=await html2canvas(el); c.toBlob(b=>saveAs(b,file)); }
async function downloadCardPNG(){ savePNG(cardFront,"card.png"); }
async function downloadFlyerPNG(){ savePNG(flyerPreview,"flyer.png"); }
async function downloadCVPNG(){ savePNG(cvPreview,"cv.png"); }

// ğŸ“„ Ø­ÙØ¸ ÙƒÙ€ PDF
async function savePDF(el,file){ const {jsPDF}=window.jspdf; const c=await html2canvas(el); const img=c.toDataURL("image/png"); const pdf=new jsPDF(); pdf.addImage(img,"PNG",10,10,180,100); pdf.save(file); }
async function downloadCardPDF(){ savePDF(cardFront,"card.pdf"); }
async function downloadFlyerPDF(){ savePDF(flyerPreview,"flyer.pdf"); }
async function downloadCVPDF(){ savePDF(cvPreview,"cv.pdf"); }

// ğŸ“¦ ZIP
async function exportZIP(){
  const zip=new JSZip();
  async function add(el,name){ const c=await html2canvas(el); zip.file(name+".png",c.toDataURL("image/png").split(",")[1],{base64:true}); }
  await add(cardFront,"card"); await add(flyerPreview,"flyer"); await add(cvPreview,"cv");
  zip.generateAsync({type:"blob"}).then(c=>saveAs(c,"all.zip"));
  showToast("ğŸ“¦ ZIP Ø¬Ø§Ù‡Ø²");
}

// ğŸŒ Ø¬Ù„Ø¨ IP
async function getIPAddress(){ try{ const r=await fetch("https://api.ipify.org?format=json"); const d=await r.json(); showToast("ğŸŒ IP: "+d.ip);}catch{ showToast("âŒ Ø®Ø·Ø£ Ø¨Ø¬Ù„Ø¨ IP"); } }

// ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
const AI_HOST="AIzaSyDVqykye92UJZHJN70JJVHkvi7ybMEuzzw";
function buildPrompt(job){ return `Professional business card / flyer background for "${job}"`; }
async function generateAIImage(job){
  try{
    showToast("â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...");
    const r=await fetch(`${AI_HOST}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:buildPrompt(job),width:1200,height:700})});
    const d=await r.json();
    let img=d.image_base64?`data:image/png;base64,${d.image_base64}`:d.image_url;
    cardFront.style.backgroundImage=`url(${img})`;
    flyerPreview.style.backgroundImage=`url(${img})`;
    showToast("âœ… ØªÙ… Ø§Ù„ØªÙˆÙ„ÙŠØ¯");
  }catch(e){ showToast("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ"); }
}

// ğŸ—‘ï¸ Ù…Ø³Ø­
function resetForm(){ document.querySelectorAll("input,textarea").forEach(el=>el.value=""); updateAll(); showToast("ğŸ—‘ï¸ ØªÙ… Ø§Ù„Ù…Ø³Ø­"); }
</script>
</body>
  </html>
